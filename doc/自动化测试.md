
<!-- slide -->

# 自动化测试

<!-- slide -->
## 分享目标

- 让不了解自动化测试的同学有一定的了解与认知。
- 引发了解自动化测试的同学一些思考与共鸣。
- 给大家带来快乐与轻松最好还有所得。

<!-- slide -->

## 我跟自动化测试的缘分

- 「径点」初出茅庐微软龙哥带我飞。 
- 「趣店」独挑大梁承担趣店「交际花」。

<!-- 在Avepoint(径点)对自动化测试的印象由一开始的”兴奋“转为”失落“最后有转为对大家成果感到”惊讶“。
径点一家很有趣的公司，我做了一年业务一直都在更新和迭代同一个功能。对了我当年也是”小鲜肉“。
在趣店的自动测试之路，一开始感到”为难“然后信念越来越”坚定“，最后完成成果也超出我的”预期“。 -->

<!-- slide -->

## 自动测试分类

- UI测试（e2e测试）
- 接口测试
- 单元测试
- money test

<!-- slide -->

## 自动化测试目标

- 提高提测质量。
- 提高上线质量。
- 减少人力成本，减去测试和开发人员的工作量。

<!-- slide -->

## E2E测试框架一览

|项目 |Web| Star
| ---------- | ----------------------------------------------- | ----- |
| selenium   | WebDirver                                       | 18400
| nightmare  | Electron                                        | 15502 |
| nightwatch | WebDriver                                       | 8135  |
| protractor | selenium                                        | 7532  |
| casperjs   | PhantomJS                                       | 7180  |
| cypress    | Electron                                        | 5303  |
| Zombie     | 不需要                                           | 4880  |
| testcafe   | 不需要                                           | 4645  |
| CodeceptJS | webdriverio                                     | 1665  |


<!-- slide -->
## E2E测试框架总结

- 端到端测试一般都需要一个 Web 容器，来运行前端应用。例如 Chromium, Electron, PhantomJS, WebDriver 等等。
- 不同的web容器其能力也是不同的除了使用webdriver的方式其它的web容器都有局限性基本就相当于你能在一个固定的浏览器内核做测试，你可能发现还有不使用web容器但是其准确性堪忧
- 从速度的角度考虑：PhantomJS, WebDriver < Electon ,webDriver headless

<!-- slide -->

## selenium-webdriver

重点介绍`selenium-webdriver`

- webdriver 协议现在已经成为业内公认的浏览器 ui 测试的标准实现。几乎所有浏览器厂商都推出自己官方 driver。
- 与其他 E2E 工具相比 webdriver 技术栈有着最强的跨平台能力可以测试各种浏览器。

<!-- slide -->

## selenium 家族

selenium 家族很庞大，在这里列出其家族成员，主要是为了让大家对其有个初步的认识然后忘记 selenium1.0 家族。

![](https://images0.cnblogs.com/i/311516/201404/091114425599381.jpg)

<!-- slide -->

|项目 |描述|
| ---------- | -----------------------------------------------|
| selenium IDE   | selenium IDE 是嵌入到Firefox浏览器中的一个插件，实现简单的浏览器操作的录制与回放功能。|        
| Selenium Grid  | Selenium Grid是一种自动化的测试辅助工具，Grid通过利用现有的计算机基础设施，能加快Web-app的功能测试。利用Grid，可以很方便地同时在多台机器上和异构环境中并行运行多个测试事例               |
| selenium RC | selenium RC 是selenium 家族的核心工具，selenium RC 支持多种不同的语言编写自动化测试脚本，通过selenium RC 的服务器作为代理服务器去访问应用从而达到测试的目的。 |
| selenium 2.0 | selenium 2.0 = selenium 1.0 + WebDriver ,在selenium 2.0 中主推的是WebDriver ，WebDriver 是selenium RC 的替代品|

<!-- slide -->

### selenium RC & WebDriver 区别

- selenium RC 在浏览器中运行JavaScript应用，使用浏览器内置的JavaScript 翻译器来翻译和执行selenese命令（selenese 是selenium命令集合）。

- WebDriver通过原生浏览器支持或者浏览器扩展直接控制浏览器。WebDriver针对各个浏览器而开发，取代了嵌入到被测Web应用中的JavaScript。与浏览器的紧密集成支持创建更高级的测试，避免了JavaScript安全模型导致的限制。除了来自浏览器厂商的支持，WebDriver还利用操作系统级的调用模拟用户输入。

<!-- slide -->

# Appium

- Appium 是原生和混合移动移动应用自动化测试的跨平台解决方案，支持 iOS、Android 本地应用以及 Hybrid 和 Mobile Web 应用的测试，支持真机和模拟测试，支持本地和云端部署。它从 2012 年发布第一个版本，经过两年多的迅猛发展，到目前已经到 1.4.8 版本，拥有 100 多名贡献者。

- Appium在协议上采用 Selenium WebDriver API，这是受到广泛认可的浏览器自动化测试标准，并且是 W3C 标准草案，Appium 在它的基础上基于移动特性做了一些扩展，并且在和 Selenium 团队合作将这些扩展容纳到标准之内。

<!-- slide -->

## xpath

XPath，全称 XML Path Language，即 XML 路径语言，它是一门在XML文档中查找信息的语言。XPath 最初设计是用来搜寻XML文档的，但是它同样适用于 HTML 文档的搜索。

- contains关键字`//a[contains(@href, "logout")]`:
　寻找页面中href属性值包含有logout这个单词的所有a元素;
- start-with`//a[starts-with(@rel, "nofo")])`:
　寻找rel属性以nofo开头的a元素。其中@后面的rel可以替换成元素的任意其他属性;
- Text关键字`//*[text()="退出"]`
　直接查找页面当中所有的退出二字;
　

## 自动化测试前提

- 软件需求变动不频繁
- 项目周期较长


<!-- slide -->

## 自动化测应该有的样子

- 稳定的测试环境
- 清晰的报告
- 持续集成
- 远离本地

<!-- slide -->

# TEST

<!-- slide -->

ddd
